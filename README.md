![yamdb_workflow](https://github.com/EvgeniyBudaev/yamdb_final/actions/workflows/yamdb_workflow.yml/badge.svg?branch=master)

# Яндекс.Практикум. Python backend. API YamDB

## Содержание
- [Описание_проекта](#Описание_проекта)
- [Технологии](#Технологии)
- [Workflow](#Workflow)
- [Запуск проекта](#Запуск_проекта)
- [Тесты](#Тесты)
- [Авторы](#Авторы)

### <a name="Описание_проекта">Описание</a>

Проект YaMDb собирает отзывы (Review) пользователей на произведения (Title). Произведения делятся на категории: «Книги», «Фильмы», «Музыка». Список категорий (Category) может быть расширен (например, можно добавить категорию «Изобразительное искусство» или «Ювелирка»).

Сами произведения в YaMDb не хранятся, здесь нельзя посмотреть фильм или послушать музыку.
В каждой категории есть произведения: книги, фильмы или музыка. Например, в категории «Книги» могут быть произведения «Винни Пух и все-все-все» и «Марсианские хроники», а в категории «Музыка» — песня «Давеча» группы «Насекомые» и вторая сюита Баха. Произведению может быть присвоен жанр из списка предустановленных (например, «Сказка», «Рок» или «Артхаус»). Новые жанры может создавать только администратор.

Благодарные или возмущённые читатели оставляют к произведениям текстовые отзывы (Review) и выставляют произведению рейтинг (оценку в диапазоне от одного до десяти). Из множества оценок автоматически высчитывается средняя оценка произведения.

### <a name="Технологии">Технологии</a>

В проекте применяется 
- **Django REST Framework**, 
- **Python 3**,
- **PostgreSQL**,
- **Docker**, 
- **Nginx**,
- **Gunicorn**,
- **Git**, 
- **Simple JWT** - аутентификация реализована с помощью **JWT-токена**.

### <a name="Workflow">Workflow состоит из четырёх шагов:</a>
- *Тестирование проекта (flake8 и pytest)*,
- *Сборка и публикация образа на DockerHub*,
- *Автоматический деплой на удаленный сервер*,
- *Отправка уведомления в телеграм-чат*.

### <a name="Запуск проекта">Запуск проекта</a>

- Клонируем репозиторий и перейдем в него
```python
 git clone https://github.com/EvgeniyBudaev/infra_sp2
 cd infra_sp2/
```

- Активируем виртуальное окружение
```python
 .\venv\Scripts\activate
```

- Установите Docker (https://docs.docker.com/get-started/)

- Клонируем образ
```python
 docker push ebudaev/yamdb:v1
```

- Запуск приложения

```python
  docker-compose up -d --build
```

- Выполнение миграции и создание суперпользователя

```python
  docker-compose exec web python manage.py makemigrations
  docker-compose exec web python manage.py migrate --noinput
  docker-compose exec web python manage.py createsuperuser
  docker-compose exec web python manage.py collectstatic --no-input
```

- Заполнение базы начальными данными

```python
 docker-compose exec web python manage.py loaddata fixtures.json
```

###
Теперь проект доступен по адресу http://127.0.0.1/. При этом номер порта указывать уже не надо: умный nginx принимает запросы на стандартном порте и перенаправляет их в приложение. Зайдите на http://127.0.0.1/admin/ и убедитесь, что страница отображается полностью: статика подгрузилась. Авторизуйтесь под аккаунтом суперпользователя и убедитесь, что миграции прошли успешно.

- Остановка приложения

```python
  docker-compose down
```

Инструкция как пользоваться данным API доступна по адресу http://localhost/redoc/

### <a name="Тесты">Тесты</a>
```python
  pytest
```

### <a name="Авторы">Авторы</a>
```
 Евгений Будаев
```